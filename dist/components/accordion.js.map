{"version":3,"file":"accordion.js","sourceRoot":"","sources":["../../lib/components/accordion.ts"],"names":[],"mappings":"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","sourcesContent":["import {Input, Component, ViewChild, ElementRef, Output, EventEmitter} from '@angular/core';\r\nimport {StateClassI} from '../interfaces/stateClass';\r\nimport {AccordionStyleI} from '../interfaces/accordionStyle';\r\nimport {State} from '../consts/state';\r\nimport {AccordionStyle} from '../consts/accordionStyle';\r\n\r\n@Component({\r\n\tselector: 'accordion',\r\n\ttemplate: `\r\n\t\t<section [ngClass]=\"classes\" [ngStyle]=\"optStyle\" class=\"accordion-container\">\r\n\t\t\t<article #accordionContent>\r\n\t\t\t\t<ng-content></ng-content>\r\n\t\t\t</article>\r\n\t\t</section>\r\n\t`,\r\n\tstyles: [`\r\n\t\t.accordion-container {\r\n\t\t\ttransition-property: height;\r\n\t\t\ttransition-timing-function: ease-in;\r\n\t\t}\r\n\t\t.${State.Collapsed} {\r\n\t\t\tdisplay:none;\r\n\t\t}\r\n\t\t.${State.Collapsing} {\r\n\t\t\toverflow:hidden;\r\n\t\t}\r\n\t`]\r\n})\r\nexport class Accordion {\r\n\r\n\tprotected classes:StateClassI = <StateClassI>{};\r\n\tprotected optStyle:AccordionStyleI = <AccordionStyleI>{};\r\n\tprotected _duration:number = 300;\r\n\tprotected timers = [];\r\n\t@ViewChild('accordionContent')\r\n\tprotected content:ElementRef;\r\n\r\n\t@Input()\r\n\tprotected set collapse(value:boolean) { this.toggle(value); };\r\n\r\n\t@Output()\r\n\tprotected stateChange:EventEmitter<Boolean> = new EventEmitter();\r\n\r\n\t@Input()\r\n\tprotected set duration(duration:number) {\r\n\t\tthis._duration = duration || this._duration;\r\n\t\tthis.optStyle[AccordionStyle.Duration] = `${this._duration}ms`;\r\n\t};\r\n\r\n\tprivate get contentNode():Node { return this.content.nativeElement; }\r\n\r\n\tprivate get contentHeight():number { return (<any>this.contentNode).getBoundingClientRect().height; }\r\n\r\n\tconstructor() {\r\n\t\tthis.classes[State.Open] = true;\r\n\t\tthis.classes[State.Collapsing] = false;\r\n\t\tthis.classes[State.Collapsed] = false;\r\n\t\tthis.optStyle[AccordionStyle.Duration] = `${this._duration}ms`;\r\n\t}\r\n\r\n\tprivate open() {\r\n\t\tthis.optStyle[AccordionStyle.Height] = 0;\r\n\t\tthis.classes[State.Collapsed] = false;\r\n\t\tthis.classes[State.Collapsing] = this.classes[State.Open] = true;\r\n\t\tthis.optStyle[AccordionStyle.Height] = 0;\r\n\r\n\t\tlet timer = setTimeout(() => this.optStyle[AccordionStyle.Height] = this.contentHeight, 1);\r\n\t\tthis.timers.push(timer);\r\n\t\ttimer = setTimeout(() => {\r\n\t\t\tdelete this.optStyle[AccordionStyle.Height];\r\n\t\t\tthis.classes[State.Collapsing] = false;\r\n\t\t\tthis.stateChange.emit(true);\r\n\t\t}, this._duration);\r\n\t\tthis.timers.push(timer);\r\n\t}\r\n\r\n\tprivate close() {\r\n\t\tthis.optStyle[AccordionStyle.Height] = this.contentHeight;\r\n\t\tthis.classes[State.Open] = false;\r\n\t\tthis.classes[State.Collapsing] = true;\r\n\r\n\t\tlet timer = setTimeout(() => this.optStyle[AccordionStyle.Height] = 0, 1);\r\n\t\tthis.timers.push(timer);\r\n\t\ttimer = setTimeout(() => {\r\n\t\t\tdelete this.optStyle[AccordionStyle.Height];\r\n\t\t\tthis.classes[State.Collapsing] = false;\r\n\t\t\tthis.classes[State.Collapsed] = true;\r\n\t\t\tthis.stateChange.emit(false);\r\n\t\t}, this._duration);\r\n\t\tthis.timers.push(timer);\r\n\t}\r\n\r\n\tprivate resetTimers() {\r\n\t\tthis.timers.forEach((timer) => clearTimeout(timer));\r\n\t\tthis.timers = [];\r\n\t}\r\n\r\n\tpublic toggle(state = null) {\r\n\t\tif(this.classes[State.Open] && state === true) return;\r\n\t\tif(this.classes[State.Collapsed] && state === false) return;\r\n\r\n\t\tthis.resetTimers();\r\n\t\tif(this.classes[State.Open])\r\n\t\t\tthis.close();\r\n\t\telse\r\n\t\t\tthis.open();\r\n\t}\r\n\r\n}\r\n"]}